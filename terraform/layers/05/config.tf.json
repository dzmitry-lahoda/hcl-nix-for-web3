{
  "provider": {
    "google": {
      "project": "${ var.PROJECT }",
      "region": "us-central1",
      "zone": "us-central1-c"
    }
  },
  "resource": {
    "google_compute_address": {
      "static": {
        "name": "ipv4-address"
      }
    },
    "google_compute_image": {
      "gce-image": {
        "name": "gce-image",
        "raw_disk": {
          "source": "${resource.google_storage_bucket_object.gce-image-gz.self_link}"
        }
      }
    },
    "google_service_account": {
      "default": {
        "account_id": "${ var.PROJECT }-account",
        "project": "${ var.PROJECT }"
      }
    },
    "google_storage_bucket": {
      "gce-image": {
        "force_destroy": true,
        "location": "US",
        "name": "${var.PROJECT}-gce-image"
      }
    },
    "google_storage_bucket_object": {
      "gce-image-gz": {
        "bucket": "${resource.google_storage_bucket.gce-image.name}",
        "name": "${var.PROJECT}-image.tar.gz",
        "source": "${var.IMAGE_FILE}"
      }
    },
    "local_file": {
      "test_import": {
        "content": "Hello",
        "filename": "test_import.txt"
      }
    },
    "time_sleep": {
      "google_service_account-default": {
        "create_duration": "30s",
        "depends_on": [
          "resource.google_service_account.default"
        ]
      }
    }
  },
  "variable": {
    "IMAGE_FILE": {
      "description": "NixOS image file for Google Cloud",
      "type": "string"
    },
    "PROJECT": {
      "description": "Google Cloud Project ID",
      "type": "string"
    }
  }
}
